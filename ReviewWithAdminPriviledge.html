<!DOCTYPE html>
<html>
<head>
  <title>Review Rating System</title>
  <script type="text/javascript" src="https://me.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=bFEKbMRlGl4eebAHeZDoXnheWwsAunsgE4M8Uq6k6LAQITahuDwDzTE803gguVbhx7Vk0aZZKziXpox9yjomlRSVzgnPStZQA-KEc5VtWxPYuRmcQx4f6iPedcJxSVTjKZM7bAqcfU8Ll-O_Y4jf_85o2QUtKSatoBGhOqvqMTDsrJ2zeNmvFz4YDO0v-5nlHhFgr1lIaYGeqLAjRhKGg7sAqZDTjNWMAHjDrdoBoUC993vCi0D0IhKZSlXq4-ksA7tsO0ctC9EaI41QVTk0r8wpMR9D3I3ecElqWtEFPy6nEJHPQbDSoRCgrikV2N36qB0hGrezh84PCofGv8qPJJgYDFm1mQxVL5-eFE0CjVv0J3lUFxlKLYLQ6paoZlr8kyTdwp_ZzdAAGVSYFnnL8k-hh9FQos7NGlniWBNmt1i5VMSmRfg_p4U_rMbOpcEiaS7fQBl_do2S4cFvw7FSUhgSeDhF6xm0-OxQCw4h5_8" charset="UTF-8"></script><style>
    .stars {
      display: inline-block;
      font-size: 24px;
      cursor: pointer;
    }
    .stars:hover {
      color: orange;
    }
    .selected {
      color: orange;
    }
    .comments {
      margin-top: 10px;
    }
    .admin-controls {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Review Rating System</h1>
  <div class="stars" onclick="rate(1)">★</div>
  <div class="stars" onclick="rate(2)">★</div>
  <div class="stars" onclick="rate(3)">★</div>
  <div class="stars" onclick="rate(4)">★</div>
  <div class="stars" onclick="rate(5)">★</div>
  <div class="comments">
    <h3>Comments:</h3>
    <ul id="commentList"></ul>
    <input type="text" id="commentInput" placeholder="Add your review here...">
    <input type="file" id="imageInput">
    <button onclick="addComment()">Submit</button>
  </div>
  <div class="admin-controls">
    <h3>Admin Controls:</h3>
    <input type="number" id="deleteIndex" placeholder="Enter review number...">
    <button onclick="deleteReview()">Delete Review</button>
  </div>

  <script>
    let selectedRating = 0;
    const commentList = document.getElementById('commentList');
    const commentInput = document.getElementById('commentInput');
    const imageInput = document.getElementById('imageInput');
    const deleteIndexInput = document.getElementById('deleteIndex');

    function rate(rating) {
      selectedRating = rating;
      const stars = document.getElementsByClassName('stars');
      for (let i = 0; i < stars.length; i++) {
        if (i < rating) {
          stars[i].classList.add('selected');
        } else {
          stars[i].classList.remove('selected');
        }
      }
    }

    function addComment() {
      const comment = commentInput.value;
      if (comment === '') return;

      const file = imageInput.files[0];
      const reader = new FileReader();

      reader.onload = function(event) {
        const imageUrl = event.target.result;

        const review = {
          rating: selectedRating,
          comment: comment,
          image: imageUrl
        };

        saveReview(review);

        const li = document.createElement('li');
        li.innerHTML = `<p>${review.rating} star(s): ${review.comment}</p><img src="${review.image}" alt="Review Image" width="200">`;
        commentList.appendChild(li);

        commentInput.value = '';
        imageInput.value = '';
      };

      if (file) {
        reader.readAsDataURL(file);
      } else {
        const review = {
          rating: selectedRating,
          comment: comment
        };
        
        saveReview(review);

        const li = document.createElement('li');
        li.innerText = `${review.rating} star(s): ${review.comment}`;
        commentList.appendChild(li);
        commentInput.value = '';
      }
    }

    function saveReview(review) {
      let reviews = [];
      if (localStorage.getItem('reviews')) {
        reviews = JSON.parse(localStorage.getItem('reviews'));
      }
      reviews.push(review);
      localStorage.setItem('reviews', JSON.stringify(reviews));
    }

    function loadReviews() {
      if (localStorage.getItem('reviews')) {
        const reviews = JSON.parse(localStorage.getItem('reviews'));
        reviews.forEach((review, index) => {
          const li = document.createElement('li');
          li.innerHTML = `<p>${review.rating} star(s): ${review.comment}</p><img src="${review.image}" alt="Review Image" width="200">`;
          commentList.appendChild(li);

          if (isAdmin()) {
            const deleteButton = document.createElement('button');
            deleteButton.innerText = 'Delete';
            deleteButton.onclick = function() {
              deleteReview(index);
            };
            li.appendChild(deleteButton);
          }
        });
      }
    }

    function deleteReview(index) {
      let reviews = [];
      if (localStorage.getItem('reviews')) {
        reviews = JSON.parse(localStorage.getItem('reviews'));
      }
      reviews.splice(index, 1);

      localStorage.setItem('reviews', JSON.stringify(reviews));

      commentList.innerHTML = '';
      loadReviews();
    }

    function deleteReview() {
      const deleteIndex = deleteIndexInput.value;
      if (deleteIndex === '') return;

      deleteReview(deleteIndex);
      deleteIndexInput.value = '';
    }

    function isAdmin() {
      // Implement your own logic to determine admin privileges
      // For simplicity, we'll assume the user with the ID 'admin' is an admin
      const userId = 'admin';
      return userId === 'admin';
    }

    loadReviews();
  </script>
</body>
</html>